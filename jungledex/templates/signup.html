<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- jQuery & Tailwind -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <title>ì •ê¸€ë±ìŠ¤ | íšŒì›ê°€ì…</title>
  </head>
  <body class="flex bg-gray-100 items-center justify-center min-h-screen">
    <!-- ë¡œë”© ëª¨ë‹¬ -->
    <div
      id="loadingModal"
      class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50"
    >
      <div class="bg-white p-6 rounded-lg shadow-lg">
        <p id="loadingTip" class="text-gray-800 text-center">
          <!-- JSì—ì„œ ìˆœí™˜ë  í…ìŠ¤íŠ¸ê°€ ë“¤ì–´ê°‘ë‹ˆë‹¤ -->
        </p>
      </div>
    </div>

    <!-- í™•ì¸ ëª¨ë‹¬ -->
    <div
      id="confirmModal"
      class="fixed inset-0 bg-black bg-opacity-30 backdrop-blur-sm flex items-center justify-center hidden z-50 p-4"
    >
      <div
        class="bg-white rounded-2xl shadow-2xl w-full max-w-lg p-8 flex justify-center flex-col"
      >
        <h3 class="text-2xl font-semibold mb-6 text-gray-800 text-center">
          ë‹¤ìŒê³¼ ê°™ì€ ì •ë³´ë¡œ ë„ê°ì— ë“±ë¡í•©ë‹ˆë‹¤ ğŸŒ¿
        </h3>
        <div class="mb-6">
          <p
            id="summaryText"
            class="text-sm text-gray-700 leading-relaxed whitespace-pre-line border border-gray-200 rounded-lg p-4 bg-gray-50"
          ></p>
          <div id="confirmError" class="hidden text-red-600"></div>
        </div>
        <div class="mb-6">
          <p class="text-base font-medium mb-3 text-gray-800">
            ìì‹ ì„ ë‚˜íƒ€ë‚¼ ëŒ€í‘œ ì†ì„±ì„ ì„ íƒí•´ì£¼ì„¸ìš” ğŸ”¥
          </p>
          <div id="choiceList" class="flex flex-wrap gap-3"></div>
        </div>
        <div class="flex justify-end space-x-4">
          <button
            id="confirmCancel"
            class="px-5 py-2 font-medium bg-white text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition"
          >
            ì·¨ì†Œ
          </button>
          <button
            id="confirmOk"
            class="px-5 py-2 font-medium text-white rounded-lg shadow bg-gradient-to-r from-green-800 to-green-600 hover:from-green-900 hover:to-green-700 transition"
          >
            í™•ì¸
          </button>
        </div>
      </div>
    </div>

    <!-- ì„±ê³µ ëª¨ë‹¬ -->
    <div
      id="successModal"
      class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50"
    >
      <div
        class="bg-white w-11/12 max-w-sm p-6 rounded-lg shadow-lg text-center"
      >
        <h3 class="text-lg font-bold mb-4 text-green-600">
          ì •ê¸€ ë„ê°ì— ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!
        </h3>
        <p class="text-sm text-gray-700">ì •ê¸€ì— ë›°ì–´ë“¤ ì¤€ë¹„ ì¤‘...</p>
      </div>
    </div>

    <div class="w-full max-w-md bg-white p-8 rounded-2xl shadow-lg">
      <h2 class="text-center text-2xl font-bold mb-6">JungleDex ë„ê° ë“±ë¡</h2>

      <!-- ============= STEP 1: ì‚¬ìš©ìëª… ì…ë ¥ ============= -->
      <form id="step1Form" class="space-y-4">
        <div>
          <label for="username" class="block text-sm font-medium text-gray-900">
            ì‚¬ìš©ìëª…
          </label>
          <input
            type="text"
            id="username"
            name="username"
            required
            class="mt-1 block w-full rounded-md border border-gray-300 px-3 py-2"
          />
        </div>
        <!-- â†“ ì´ ë¶€ë¶„ ì¶”ê°€ -->
        <div id="step1Error" class="hidden text-red-600 text-sm mt-1"></div>
        <button
          type="button"
          id="step1Next"
          class="w-full relative inline-flex items-center justify-center rounded-md px-3 py-2 text-white font-semibold disabled:opacity-50 bg-gradient-to-r from-green-800 to-green-600 hover:from-green-900 hover:to-green-700"
        >
          ë‹¤ìŒ
        </button>
      </form>

      <!-- STEP 2: ë¹„ë°€ë²ˆí˜¸ ì„¤ì • -->
      <form id="step2Form" class="space-y-4 hidden">
        <div>
          <label for="password" class="block text-sm font-medium text-gray-900"
            >ë¹„ë°€ë²ˆí˜¸</label
          >
          <input
            type="password"
            id="password"
            name="password"
            class="mt-1 block w-full rounded-md border border-gray-300 px-3 py-2"
          />
        </div>
        <div>
          <label
            for="passwordConfirm"
            class="block text-sm font-medium text-gray-900"
            >ë¹„ë°€ë²ˆí˜¸ í™•ì¸</label
          >
          <input
            type="password"
            id="passwordConfirm"
            name="passwordConfirm"
            class="mt-1 block w-full rounded-md border border-gray-300 px-3 py-2"
          />
        </div>

        <!-- ì—ëŸ¬ ë©”ì‹œì§€ ì˜ì—­ -->
        <div id="step2Error" class="hidden text-red-600 text-sm"></div>

        <div class="flex gap-2">
          <button
            type="button"
            id="step2Prev"
            class="flex-1 bg-gray-300 text-gray-700 py-2 rounded-md hover:bg-gray-200"
          >
            ì´ì „
          </button>
          <button
            type="submit"
            id="step2Next"
            class="flex-1 text-white py-2 rounded-md bg-gradient-to-r from-green-800 to-green-600 hover:from-green-900 hover:to-green-700"
          >
            ë‹¤ìŒ
          </button>
        </div>
      </form>

      <!-- ======== STEP 3: ì¶”ê°€ ì •ë³´ & ìµœì¢… ì œì¶œ ======== -->
      <form
        id="step3Form"
        class="space-y-4 hidden"
        action="/dashboard"
        method="POST"
      >
        <div>
          <div id="signupError" class="hidden text-red-600 mb-4"></div>
          <label for="real_name" class="block text-sm font-medium text-gray-700"
            >ì´ë¦„</label
          >
          <input
            type="text"
            name="real_name"
            id="real_name"
            required
            class="mt-1 block w-full rounded-md px-3 py-2 ring-1 ring-gray-300 focus:ring-2 focus:ring-green-600"
          />
        </div>
        <div>
          <label for="aboutMe" class="block text-sm font-medium text-gray-700">
            ê°„ë‹¨í•œ ì†Œê°œ
          </label>
          <textarea
            id="aboutMe"
            name="aboutMe"
            required
            maxlength="50"
            class="mt-1 block w-full rounded-md border border-gray-300 px-3 py-2"
            placeholder="ë‚˜ë¥¼ ì†Œê°œí•  í•œë§ˆë””... (TMI)"
          ></textarea>
        </div>

        <div>
          <p class="block text-sm font-medium text-gray-700">ì·¨ë¯¸</p>
          <!-- ìˆ˜ì • í›„: ê° ì²´í¬ë°•ìŠ¤+ë ˆì´ë¸”ì„ ë³„ë„ Wrapper(div)ë¡œ ê°ìŒˆ -->
          <div class="flex flex-wrap gap-2 mt-1">
            <div class="inline-block">
              <input
                type="checkbox"
                id="hobby-í…Œë‹ˆìŠ¤"
                name="hobby"
                value="í…Œë‹ˆìŠ¤"
                class="hidden peer"
              />
              <label
                for="hobby-í…Œë‹ˆìŠ¤"
                class="cursor-pointer px-3 py-1 rounded-full border border-gray-300 peer-checked:bg-green-600 peer-checked:text-white transform transition hover:scale-105"
              >
                ğŸ¾ í…Œë‹ˆìŠ¤
              </label>
            </div>

            <div class="inline-block">
              <input
                type="checkbox"
                id="hobby-ë…ì„œ"
                name="hobby"
                value="ë…ì„œ"
                class="hidden peer"
              />
              <label
                for="hobby-ë…ì„œ"
                class="cursor-pointer px-3 py-1 rounded-full border border-gray-300 peer-checked:bg-green-600 peer-checked:text-white transform transition hover:scale-105"
              >
                ğŸ“š ë…ì„œ
              </label>
            </div>


            <div class="inline-block">
              <input
                type="checkbox"
                id="hobby-ëŸ¬ë‹"
                name="hobby"
                value="ëŸ¬ë‹"
                class="hidden peer"
              />
              <label
                for="hobby-ëŸ¬ë‹"
                class="cursor-pointer px-3 py-1 rounded-full border border-gray-300 peer-checked:bg-green-600 peer-checked:text-white transform transition hover:scale-105"
              >
                ğŸƒâ€â™‚ï¸ ëŸ¬ë‹
              </label>
            </div>


            <div class="inline-block">
              <input
                type="checkbox"
                id="hobby-í—¬ìŠ¤"
                name="hobby"
                value="í—¬ìŠ¤"
                class="hidden peer"
              />
              <label
                for="hobby-í—¬ìŠ¤"
                class="cursor-pointer px-3 py-1 rounded-full border border-gray-300 peer-checked:bg-green-600 peer-checked:text-white transform transition hover:scale-105"
              >
                ğŸ‹ï¸â€â™€ï¸ í—¬ìŠ¤
              </label>
            </div>


            <div class="inline-block">
              <input
                type="checkbox"
                id="hobby-ìš”ë¦¬"
                name="hobby"
                value="ìš”ë¦¬"
                class="hidden peer"
              />
              <label
                for="hobby-ìš”ë¦¬"
                class="cursor-pointer px-3 py-1 rounded-full border border-gray-300 peer-checked:bg-green-600 peer-checked:text-white transform transition hover:scale-105"
              >
                ğŸ‘©â€ğŸ³ ìš”ë¦¬
              </label>
            </div>


            <div class="inline-block">
              <input
                type="checkbox"
                id="hobby-ìŒì•…"
                name="hobby"
                value="ìŒì•…"
                class="hidden peer"
              />
              <label
                for="hobby-ìŒì•…"
                class="cursor-pointer px-3 py-1 rounded-full border border-gray-300 peer-checked:bg-green-600 peer-checked:text-white transform transition hover:scale-105"
              >
                ğŸ§ ìŒì•…
              </label>
            </div>


            <div class="inline-block">
              <input
                type="checkbox"
                id="hobby-ë¯¸ìˆ "
                name="hobby"
                value="ë¯¸ìˆ "
                class="hidden peer"
              />
              <label
                for="hobby-ë¯¸ìˆ "
                class="cursor-pointer px-3 py-1 rounded-full border border-gray-300 peer-checked:bg-green-600 peer-checked:text-white transform transition hover:scale-105"
              >
                ğŸ¨ ë¯¸ìˆ 
              </label>
            </div>


            <div class="inline-block">
              <input
                type="checkbox"
                id="hobby-ë¬´ìˆ "
                name="hobby"
                value="ë¬´ìˆ "
                class="hidden peer"
              />
              <label
                for="hobby-ë¬´ìˆ "
                class="cursor-pointer px-3 py-1 rounded-full border border-gray-300 peer-checked:bg-green-600 peer-checked:text-white transform transition hover:scale-105"
              >
                ğŸ¥Š ë¬´ìˆ 
              </label>
            </div>


            <div class="inline-block">
              <input
                type="checkbox"
                id="hobby-ì¶¤"
                name="hobby"
                value="ì¶¤"
                class="hidden peer"
              />
              <label
                for="hobby-ì¶¤"
                class="cursor-pointer px-3 py-1 rounded-full border border-gray-300 peer-checked:bg-green-600 peer-checked:text-white transform transition hover:scale-105"
              >
                ğŸ’ƒ ì¶¤
              </label>
            </div>

            <div class="inline-block">
              <input
                type="checkbox"
                id="hobby-ì½”ë”©"
                name="hobby"
                value="ì½”ë”©"
                class="hidden peer"
              />
              <label
                for="hobby-ì½”ë”©"
                class="cursor-pointer px-3 py-1 rounded-full border border-gray-300 peer-checked:bg-green-600 peer-checked:text-white transform transition hover:scale-105"
              >
                ğŸ‘¨â€ğŸ’»  ì½”ë”© 
              </label>
            </div>

            <div class="inline-block">
              <input
                type="checkbox"
                id="hobby-í´ë¼ì´ë°"
                name="hobby"
                value="í´ë¼ì´ë°"
                class="hidden peer"
              />
              <label
                for="hobby-í´ë¼ì´ë°"
                class="cursor-pointer px-3 py-1 rounded-full border border-gray-300 peer-checked:bg-green-600 peer-checked:text-white transform transition hover:scale-105"
              >
                ğŸ§— í´ë¼ì´ë° 
              </label>
            </div>


            <div class="inline-block">
              <input
                type="checkbox"
                id="hobby-ì¶•êµ¬"
                name="hobby"
                value="ì¶•êµ¬"
                class="hidden peer"
              />
              <label
                for="hobby-ì¶•êµ¬"
                class="cursor-pointer px-3 py-1 rounded-full border border-gray-300 peer-checked:bg-green-600 peer-checked:text-white transform transition hover:scale-105"
              >
                âš½ï¸ ì¶•êµ¬
              </label>
            </div>


            <div class="inline-block">
              <input
                type="checkbox"
                id="hobby-ìš”ê°€"
                name="hobby"
                value="ìš”ê°€"
                class="hidden peer"
              />
              <label
                for="hobby-ìš”ê°€"
                class="cursor-pointer px-3 py-1 rounded-full border border-gray-300 peer-checked:bg-green-600 peer-checked:text-white transform transition hover:scale-105"
              >
                ğŸ§˜â€â™€ï¸ ìš”ê°€
              </label>
            </div>


            <div class="inline-block">
              <input
                type="checkbox"
                id="hobby-ìŠ¤í‚¤"
                name="hobby"
                value="ìŠ¤í‚¤"
                class="hidden peer"
              />
              <label
                for="hobby-ìŠ¤í‚¤"
                class="cursor-pointer px-3 py-1 rounded-full border border-gray-300 peer-checked:bg-green-600 peer-checked:text-white transform transition hover:scale-105"
              >
                â›·ï¸ ìŠ¤í‚¤
              </label>
            </div>


            <div class="inline-block">
              <input
                type="checkbox"
                id="hobby-ê³¨í”„"
                name="hobby"
                value="ê³¨í”„"
                class="hidden peer"
              />
              <label
                for="hobby-ê³¨í”„"
                class="cursor-pointer px-3 py-1 rounded-full border border-gray-300 peer-checked:bg-green-600 peer-checked:text-white transform transition hover:scale-105"
              >
                â›³ï¸ ê³¨í”„
              </label>
            </div>


            <div class="inline-block">
              <input
                type="checkbox"
                id="hobby-ìŠ¤ì¼€ì´íŠ¸ ë³´ë”©"
                name="hobby"
                value="ìŠ¤ì¼€ì´íŠ¸ ë³´ë”©"
                class="hidden peer"
              />
              <label
                for="hobby-ìŠ¤ì¼€ì´íŠ¸ ë³´ë”©"
                class="cursor-pointer px-3 py-1 rounded-full border border-gray-300 peer-checked:bg-green-600 peer-checked:text-white transform transition hover:scale-105"
              >
                ğŸ›¹ ìŠ¤ì¼€ì´íŠ¸ ë³´ë”©
              </label>
            </div>


            <div class="inline-block">
              <input
                type="checkbox"
                id="hobby-ì˜í™”"
                name="hobby"
                value="ì˜í™”"
                class="hidden peer"
              />
              <label
                for="hobby-ì˜í™”"
                class="cursor-pointer px-3 py-1 rounded-full border border-gray-300 peer-checked:bg-green-600 peer-checked:text-white transform transition hover:scale-105"
              >
                ğŸ¿ ì˜í™”
              </label>
            </div>


            <div class="inline-block">
              <input
                type="checkbox"
                id="hobby-ì—¬í–‰"
                name="hobby"
                value="ì—¬í–‰"
                class="hidden peer"
              />
              <label
                for="hobby-ì—¬í–‰"
                class="cursor-pointer px-3 py-1 rounded-full border border-gray-300 peer-checked:bg-green-600 peer-checked:text-white transform transition hover:scale-105"
              >
                âœˆï¸ ì—¬í–‰
              </label>
            </div>


            <div class="inline-block">
              <input
                type="checkbox"
                id="hobby-ê²Œì„"
                name="hobby"
                value="ê²Œì„"
                class="hidden peer"
              />
              <label
                for="hobby-ê²Œì„"
                class="cursor-pointer px-3 py-1 rounded-full border border-gray-300 peer-checked:bg-green-600 peer-checked:text-white transform transition hover:scale-105"
              >
                ğŸ® ê²Œì„
              </label>
            </div>


            <div class="inline-block">
              <input
                type="checkbox"
                id="hobby-ë“œë¼ì´ë¸Œ"
                name="hobby"
                value="ë“œë¼ì´ë¸Œ"
                class="hidden peer"
              />
              <label
                for="hobby-ë“œë¼ì´ë¸Œ"
                class="cursor-pointer px-3 py-1 rounded-full border border-gray-300 peer-checked:bg-green-600 peer-checked:text-white transform transition hover:scale-105"
              >
                ğŸš™ ë“œë¼ì´ë¸Œ
              </label>
            </div>

            <!-- ë‚˜ë¨¸ì§€ë„ ë™ì¼í•˜ê²Œ ë¬¶ì–´ì„œâ€¦ -->
          </div>
          <div id="hobbyError" class="hidden text-red-600 text-sm mt-1">
            ìµœì†Œ 1ê°œ ì´ìƒ ì„ íƒí•´ì£¼ì„¸ìš”.
          </div>
        </div>

        <p class="block text-sm font-medium text-gray-700">MBTI</p>
        <div class="grid grid-cols-2 gap-4 mt-1">
          <!-- ê° ë²„íŠ¼ì„ ê°€ë¡œë¡œ ê½‰ ì±„ìš°ê³  í…ìŠ¤íŠ¸ ì¤‘ì•™ ì •ë ¬ -->
          <div>
            <input
              type="radio"
              id="mbti-E"
              name="ei"
              value="E"
              class="hidden peer"
            />
            <label
              for="mbti-E"
              class="cursor-pointer w-full block px-3 py-2 rounded-full border border-gray-300 peer-checked:bg-green-600 peer-checked:text-white text-center transform transition hover:scale-105"
              >E</label
            >
          </div>
          <div>
            <input
              type="radio"
              id="mbti-I"
              name="ei"
              value="I"
              class="hidden peer"
            />
            <label
              for="mbti-I"
              class="cursor-pointer w-full block px-3 py-2 rounded-full border border-gray-300 peer-checked:bg-green-600 peer-checked:text-white text-center transform transition hover:scale-105"
              >I</label
            >
          </div>
          <div>
            <input
              type="radio"
              id="mbti-S"
              name="sn"
              value="S"
              class="hidden peer"
            />
            <label
              for="mbti-S"
              class="cursor-pointer w-full block px-3 py-2 rounded-full border border-gray-300 peer-checked:bg-green-600 peer-checked:text-white text-center transform transition hover:scale-105"
              >S</label
            >
          </div>
          <div>
            <input
              type="radio"
              id="mbti-N"
              name="sn"
              value="N"
              class="hidden peer"
            />
            <label
              for="mbti-N"
              class="cursor-pointer w-full block px-3 py-2 rounded-full border border-gray-300 peer-checked:bg-green-600 peer-checked:text-white text-center transform transition hover:scale-105"
              >N</label
            >
          </div>
          <div>
            <input
              type="radio"
              id="mbti-T"
              name="tf"
              value="T"
              class="hidden peer"
            />
            <label
              for="mbti-T"
              class="cursor-pointer w-full block px-3 py-2 rounded-full border border-gray-300 peer-checked:bg-green-600 peer-checked:text-white text-center transform transition hover:scale-105"
              >T</label
            >
          </div>
          <div>
            <input
              type="radio"
              id="mbti-F"
              name="tf"
              value="F"
              class="hidden peer"
            />
            <label
              for="mbti-F"
              class="cursor-pointer w-full block px-3 py-2 rounded-full border border-gray-300 peer-checked:bg-green-600 peer-checked:text-white text-center transform transition hover:scale-105"
              >F</label
            >
          </div>
          <div>
            <input
              type="radio"
              id="mbti-J"
              name="jp"
              value="J"
              class="hidden peer"
            />
            <label
              for="mbti-J"
              class="cursor-pointer w-full block px-3 py-2 rounded-full border border-gray-300 peer-checked:bg-green-600 peer-checked:text-white text-center transform transition hover:scale-105"
              >J</label
            >
          </div>
          <div>
            <input
              type="radio"
              id="mbti-P"
              name="jp"
              value="P"
              class="hidden peer"
            />
            <label
              for="mbti-P"
              class="cursor-pointer w-full block px-3 py-2 rounded-full border border-gray-300 peer-checked:bg-green-600 peer-checked:text-white text-center transform transition hover:scale-105"
              >P</label
            >
          </div>
        </div>

        <!-- STEP 3: ì„ í˜¸ ì–¸ì–´ -->
        <div>
          <p class="block text-sm font-medium text-gray-700">ì„ í˜¸ ì–¸ì–´</p>
          <!-- ë¼ë””ì˜¤ ë²„íŠ¼ìœ¼ë¡œ ë³€ê²½: í•˜ë‚˜ë§Œ ì„ íƒ -->
          <div class="flex flex-wrap gap-2 mt-1">
            <div class="inline-block">
              <input
                type="radio"
                id="lang-python"
                name="languages"
                value="Python"
                class="hidden peer"
              />
              <label
                for="lang-python"
                class="cursor-pointer px-3 py-1 rounded-full border border-gray-300 peer-checked:bg-green-600 peer-checked:text-white transform transition hover:scale-105"
                >Python</label
              >
            </div>
            <div class="inline-block">
              <input
                type="radio"
                id="lang-js"
                name="languages"
                value="JavaScript"
                class="hidden peer"
              />
              <label
                for="lang-js"
                class="cursor-pointer px-3 py-1 rounded-full border border-gray-300 peer-checked:bg-green-600 peer-checked:text-white transform transition hover:scale-105"
                >JavaScript</label
              >
            </div>
            <div class="inline-block">
              <input
                type="radio"
                id="lang-java"
                name="languages"
                value="Java"
                class="hidden peer"
              />
              <label
                for="lang-java"
                class="cursor-pointer px-3 py-1 rounded-full border border-gray-300 peer-checked:bg-green-600 peer-checked:text-white transform transition hover:scale-105"
                >Java</label
              >
            </div>
            <div class="inline-block">
              <input
                type="radio"
                id="lang-cpp"
                name="languages"
                value="C++"
                class="hidden peer"
              />
              <label
                for="lang-cpp"
                class="cursor-pointer px-3 py-1 rounded-full border border-gray-300 peer-checked:bg-green-600 peer-checked:text-white transform transition hover:scale-105"
                >C++</label
              >
            </div>
            <div class="inline-block">
              <input
                type="radio"
                id="lang-csharp"
                name="languages"
                value="C#"
                class="hidden peer"
              />
              <label
                for="lang-csharp"
                class="cursor-pointer px-3 py-1 rounded-full border border-gray-300 peer-checked:bg-green-600 peer-checked:text-white transform transition hover:scale-105"
                >C#</label
              >
            </div>
            <div class="inline-block">
              <input
                type="radio"
                id="lang-go"
                name="languages"
                value="Go"
                class="hidden peer"
              />
              <label
                for="lang-go"
                class="cursor-pointer px-3 py-1 rounded-full border border-gray-300 peer-checked:bg-green-600 peer-checked:text-white transform transition hover:scale-105"
                >Go</label
              >
            </div>
            <div class="inline-block">
              <input
                type="radio"
                id="lang-rust"
                name="languages"
                value="Rust"
                class="hidden peer"
              />
              <label
                for="lang-rust"
                class="cursor-pointer px-3 py-1 rounded-full border border-gray-300 peer-checked:bg-green-600 peer-checked:text-white transform transition hover:scale-105"
                >Rust</label
              >
            </div>
            <div class="inline-block">
              <input
                type="radio"
                id="lang-typescript"
                name="languages"
                value="Typescript"
                class="hidden peer"
              />
              <label
                for="lang-typescript"
                class="cursor-pointer px-3 py-1 rounded-full border border-gray-300 peer-checked:bg-green-600 peer-checked:text-white transform transition hover:scale-105"
                >Typescript</label
              >
            </div>
            <div class="inline-block">
              <input
                type="radio"
                id="lang-swift"
                name="languages"
                value="Swift"
                class="hidden peer"
              />
              <label
                for="lang-swift"
                class="cursor-pointer px-3 py-1 rounded-full border border-gray-300 peer-checked:bg-green-600 peer-checked:text-white transform transition hover:scale-105"
                >Swift</label
              >
            </div>
          </div>
          <div id="langError" class="hidden text-red-600 text-sm mt-1">
            ì–¸ì–´ë¥¼ í•˜ë‚˜ ì„ íƒí•´ì£¼ì„¸ìš”.
          </div>
        </div>

        <div class="flex gap-2">
          <button
            type="button"
            id="step3Prev"
            class="flex-1 bg-gray-300 text-gray-700 py-2 rounded-md hover:bg-gray-200"
          >
            ì´ì „
          </button>
          <button
            type="submit"
            class="flex-1 text-white py-2 rounded-md bg-gradient-to-r from-green-800 to-green-600 hover:from-green-900 hover:to-green-700"
          >
            ì™„ë£Œ
          </button>
        </div>
      </form>

      <p class="mt-6 text-center text-sm">
        <span>ë„ê°ì— ì´ë¯¸ ë“±ë¡ë˜ì–´ìˆìœ¼ì‹ ê°€ìš”?</span>
        <a href="/signin" class="hover:underline font-bold">ë¡œê·¸ì¸</a>
      </p>
    </div>

    <script>
      $(function () {
        // ------------------------------
        // ë¡œë”© ëª¨ë‹¬ & íŒ ìˆœí™˜ í•¨ìˆ˜ ì •ì˜
        // ------------------------------
        const loadingTips = [
          "Tip: ì •ê¸€ì—ì„œ ì‚´ì•„ë‚¨ê¸° ìœ„í•´ ì—¬ëŸ¬ ì •ê¸€ëŸ¬ë“¤ì„ ë§Œë‚˜ë³´ì„¸ìš”",
          "Tip: ì •ê¸€ëª¬ì´ ë¶ˆì‘¥ íŠ€ì–´ë‚˜ì™€ë„ ë†€ë¼ì§€ ë§ˆì„¸ìš”",
          "Tip: ì •ê¸€ ë„ê°ì„ ì¸ì‡„í•˜ëŠ” ì¤‘...",
          "Tip: ì£¼ê¸°ì ìœ¼ë¡œ ì •ê¸€ì„ íƒí—˜í•´ë³´ì„¸ìš”",
        ];
        let tipIndex = 0,
          tipInterval;

        function showLoading() {
          $("#loadingTip").text(loadingTips[tipIndex]);
          tipIndex = (tipIndex + 1) % loadingTips.length;
          $("#loadingModal").removeClass("hidden");
          tipInterval = setInterval(() => {
            $("#loadingTip").text(loadingTips[tipIndex]);
            tipIndex = (tipIndex + 1) % loadingTips.length;
          }, 3000);
        }

        function hideLoading() {
          clearInterval(tipInterval);
          $("#loadingModal").addClass("hidden");
        }
        // ------------------------------

        // ------------------------------
        // 1) ì´ˆê¸°í™”: step1ë§Œ ë³´ì´ê¸° & í¬ì»¤ìŠ¤
        // ------------------------------
        showStep(1);

        // ------------------------------
        // 2) showStep í•¨ìˆ˜
        // ------------------------------
        function showStep(n) {
          $("#step1Form, #step2Form, #step3Form").hide();
          $(`#step${n}Form`).show();

          if (n === 1) {
            $("#username").focus();
          } else if (n === 2) {
            $("#password").focus();
          } else if (n === 3) {
            $("#real_name").focus();
          }
        }

        // STEP1: Enter/Click
        $("#step1Form").on("submit", function (e) {
          e.preventDefault();
          handleStep1Next();
        });
        $("#step1Next").on("click", handleStep1Next);

        function handleStep1Next() {
          const username = $("#username").val().trim();
          if (!username) {
            $("#step1Error")
              .text("ì‚¬ìš©ìëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.")
              .removeClass("hidden");
            $("#username").focus();
            return;
          }
          $.ajax({
            url: "/api/auth/check",
            method: "POST",
            contentType: "application/json; charset=UTF-8",
            data: JSON.stringify({ username }),
            dataType: "json",
            success() {
              $("#step1Error").hide(); // ì´ì „ ì˜¤ë¥˜ ìˆ¨ê¸°ê³ 
              showStep(2);
            },
            error(xhr) {
              if (xhr.status === 409) {
                $("#step1Error")
                  .text("ì´ë¯¸ ì‚¬ìš© ì¤‘ì¸ ì‚¬ìš©ìëª…ì…ë‹ˆë‹¤.")
                  .removeClass("hidden");
              } else {
                $("#step1Error")
                  .text("ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")
                  .removeClass("hidden");
              }
            },
          });
        }

        // STEP2: ì´ì „/ë‹¤ìŒ/Enter
        $("#step2Prev").on("click", () => showStep(1));
        function handleStep2Next() {
          const pw = $("#password").val(),
            pwc = $("#passwordConfirm").val();
          $("#step2Error").hide().text("");
          if (!pw || !pwc) {
            $("#step2Error")
              .text("ë¹„ë°€ë²ˆí˜¸ì™€ í™•ì¸ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.")
              .show();
            return;
          }
          if (pw !== pwc) {
            $("#step2Error").text("ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.").show();
            return;
          }
          showStep(3);
        }
        $("#password, #passwordConfirm").on("input", () => {
          $("#step2Error").hide().text("");
        });
        $("#step2Next").on("click", handleStep2Next);
        $("#step2Form").on("submit", function (e) {
          e.preventDefault();
          handleStep2Next();
        });

        // STEP3: ì´ì „
        $("#step3Prev").on("click", () => showStep(2));

        // STEP3: í™•ì¸ ëª¨ë‹¬ ë„ìš°ê¸°
        $("#step3Form")
          .off("submit")
          .on("submit", function (e) {
            e.preventDefault();
            let ok = true;
            if ($('input[name="hobby"]:checked').length < 1) {
              $("#hobbyError").removeClass("hidden");
              ok = false;
            }
            if (
              !["ei", "sn", "tf", "jp"].every((k) =>
                $('input[name="' + k + '"]:checked').val()
              )
            ) {
              $("#mbtiError").removeClass("hidden");
              ok = false;
            }
            if (!$('input[name="languages"]:checked').val()) {
              $("#langError").removeClass("hidden");
              ok = false;
            }
            if (!ok) return;

            // ë°ì´í„° ìš”ì•½ ë° ëŒ€í‘œ ì·¨ë¯¸ ì„ íƒ ëª©ë¡ ìƒì„±
            const username = $("#username").val().trim();
            const password = $("#password").val();
            const realName = $("#real_name").val().trim();
            const aboutMe = $("#aboutMe").val().trim();
            const hobbies = $('input[name="hobby"]:checked')
              .map(function () {
                return this.value;
              })
              .get();
            const mbti = ["ei", "sn", "tf", "jp"]
              .map((key) => $(`input[name="${key}"]:checked`).val())
              .join("");
            const languages = $('input[name="languages"]:checked')
              .map(function () {
                return this.value;
              })
              .get();

            const summary = `ì‚¬ìš©ìëª…: ${username}\nì´ë¦„: ${realName}\nì†Œê°œ: ${aboutMe}\nì·¨ë¯¸: ${hobbies.join(
              ", "
            )}\nMBTI: ${mbti}\nì„ í˜¸ ì–¸ì–´: ${languages.join(", ")}`;
            $("#summaryText").text(summary);

            const $choiceList = $("#choiceList").empty();
            hobbies.forEach((h) => {
              const id = "user_choice-" + h;
              const $wrap = $("<div>").addClass("inline-block");
              const $input = $("<input>")
                .attr({ type: "radio", name: "user_choice", id: id, value: h })
                .addClass("hidden peer");
              const $label = $("<label>")
                .attr("for", id)
                .addClass(
                  "cursor-pointer px-4 py-2 rounded-lg border border-gray-300 peer-checked:bg-green-600 peer-checked:text-white transition"
                )
                .text(h);
              $wrap.append($input, $label);
              $choiceList.append($wrap);
            });

            $("#confirmModal").removeClass("hidden");
          });

        // í™•ì¸ ëª¨ë‹¬ ì·¨ì†Œ
        $("#confirmCancel").on("click", () =>
          $("#confirmModal").addClass("hidden")
        );

        // í™•ì¸ ëª¨ë‹¬ í™•ì¸ -> AJAX íšŒì›ê°€ì…
        $("#confirmOk").on("click", function () {
          const rep = $('input[name="user_choice"]:checked').val();
          if (!rep) {
            $("#confirmModal .yourErrorSelector")
              .text("ëŒ€í‘œ ì·¨ë¯¸ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.")
              .removeClass("hidden");
            return;
          }
          $("#confirmModal").addClass("hidden");

          showLoading();
          $.ajax({
            url: "/api/auth/signup",
            method: "POST",
            contentType: "application/json; charset=UTF-8",
            dataType: "json",
            data: JSON.stringify(
              Object.assign(
                {
                  username: $("#username").val().trim(),
                  password: $("#password").val(),
                  real_name: $("#real_name").val().trim(),
                  aboutMe: $("#aboutMe").val().trim(),
                  hobbies: $('input[name="hobby"]:checked')
                    .map(function () {
                      return this.value;
                    })
                    .get(),
                  mbti: ["ei", "sn", "tf", "jp"]
                    .map((key) => $(`input[name="${key}"]:checked`).val())
                    .join(""),
                  languages: $('input[name="languages"]:checked')
                    .map(function () {
                      return this.value;
                    })
                    .get(),
                },
                { user_choice: rep }
              )
            ),
            success() {
              hideLoading();
              $("#successModal").removeClass("hidden");
              setTimeout(() => {
                window.location.href = "/dashboard";
              }, 2000);
            },
            error(xhr) {
              hideLoading();
              const msg =
                xhr.responseJSON?.message || "ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.";
              $("#step3Form")
                .find("#signupError")
                .text("íšŒì›ê°€ì… ì‹¤íŒ¨: " + msg)
                .removeClass("hidden");
            },
          });
        });
      });
    </script>
  </body>
</html>
